<!doctype html><html lang=en-us><head><title>Migrate models when adding inheritance in Django</title><meta charset=utf-8><meta name=generator content="Hugo 0.61.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Kevin Masson"><meta name=description content="Correctly migrate models when adding a parent class to exisint models."><link rel=stylesheet href=https://oktomus.com/style.d42f53e475884cd7e6f0e4fb4a110e13303bbff5f829c75d7cf9e0df5ef7d9e7.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Migrate models when adding inheritance in Django"><meta name=twitter:description content="Correctly migrate models when adding a parent class to exisint models."><meta property="og:title" content="Migrate models when adding inheritance in Django"><meta property="og:description" content="Correctly migrate models when adding a parent class to exisint models."><meta property="og:type" content="article"><meta property="og:url" content="https://oktomus.com/posts/2017/migrate-models-when-adding-inheritance-django/"><meta property="article:published_time" content="2017-09-17T21:28:15+01:00"><meta property="article:modified_time" content="2017-09-17T21:28:15+01:00"></head><body><header class=app-header><a href=https://oktomus.com/><img width=100 height=100 class=app-header-avatar src=/avatar.jpg alt="Kevin Masson"></a><h1><a href=https://oktomus.com/>oktomus</a></h1><p>Makes 3D softwares and photography while eating noodles.</p><div class=app-header-social><a target=_blank href=https://github.com/oktomus rel="noreferrer noopener" title=Github><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/oktomus rel="noreferrer noopener" title=Twitter><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a><a target=_blank href=mailto:hi@oktomus.com rel="noreferrer noopener" title=hi@oktomus.com><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-mail"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a><a target=_blank href=https://www.linkedin.com/in/oktomus/ rel="noreferrer noopener" title=LinkedIn><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-linkedin"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a><a target=_blank href=https://www.instagram.com/oktomus/ rel="noreferrer noopener" title=Instagram><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-instagram"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/></svg></a><a target=_blank href=https://500px.com/oktomus rel="noreferrer noopener" title=500px><svg fill="currentcolor" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" width="48" id="svg2" height="24" viewBox="0 0 666.66669 166.13333"><g transform="matrix(1.3333333,0,0,-1.3333333,0,166.13333)" id="g10"><g transform="scale(0.1)" id="g12"><path id="path14" style="fill-opacity:1;fill-rule:nonzero;stroke:none" d="m4761.93 915.121 226.03 226.029c8.2 8.21 27.42 27.46-11.48 67.51-16.68 17.18-31.89 25.95-45.19 26.05h-.24c-11.45.0-19.17-6.14-25.21-12.17L4679.28 995.977 4453.09 1223.56c-18.28 18.3-39.69 14.01-67.29-13.55-28.07-28.22-32.66-49.89-14.45-68.2l226.22-227.564-221.56-221.57-1.58-1.547c-5.39-5.227-13.53-13.113-13.64-25.973-.1-13.261 8.73-28.879 26.26-46.414 14.8-14.812 28.82-22.316 41.7-22.316h.01c14.51.012 23.78 9.308 29.02 14.543l222.4 222.41 227.42-227.449c2.87-2.86 10.88-9.457 23.74-9.457h.46c14.38.172 29.52 8.515 45.01 24.781 25.52 26.801 29.78 49.129 12.65 66.359zm-816.56 324.699c-167.5-12.74-298.71-160.06-298.71-335.394V350.023c0-32.117 24.42-38.691 61.07-38.691s61.07 6.574 61.07 38.691V905.73c0 109.24 79.47 203.04 180.91 213.54 58.24 5.94 114.22-12.29 157.76-51.56 42.74-38.52 67.26-93.909 67.28-151.972.0-16.617-8.14-70.734-45.28-120.968-28.09-37.958-81.3-83.172-175.65-83.172-.51-.012-1.2.0-1.79.0-24.21.0-44.88-1.141-48.86-58.496-2.67-38.594-2.45-55.852 30.89-60.493 59.47-8.25 120.11 3.375 180.2 34.606 102.61 53.383 171.35 154.535 179.43 264.004 7.02 95.078-27.27 187.831-94.09 254.491-67.07 66.89-159.69 101.15-254.23 94.11zM477.48 872.383C357.461 889.613 240.426 857.684 145.102 784.309V1114.5h559.531c19.437.0 33.379 3.5 33.379 60.91.0 56.02-22.571 58.24-37.465 58.24H80.9648c-35.9765.0-55.0117-29.1-55.0117-61.36V630.379c0-28.414 18.0117-38.043 51.5352-44.68 29.3477-5.808 46.3907-2.414 59.2227 11.809l1.351 2.082C197.09 684.672 325.527 767.09 447.605 752.148 593.32 734.32 710.648 618.078 726.695 475.762 736.934 384.953 709.223 297.66 648.719 229.961 588.988 163.121 503.48 124.781 414.156 124.781c-132.328.0-247.984 85.059-296.144 208.508-7.129 18.277-19.1722 31.809-71.3011 12.856C-1.1875 328.73-3.96484 308.574 2.64062 290.32 65.3398 117.672 230.711 1.66016 414.137 1.66016c124.23.0 243.121 53.26174 326.187 146.14084 84.164 94.078 122.391 215.359 108.313 341.504C826.574 686.766 673.727 844.293 477.48 872.383zM2896.61 132.852c-270.27.0-490.16 219.882-490.16 490.148.0 270.277 219.89 490.16 490.16 490.16 270.25.0 490.12-219.883 490.12-490.16.0-270.266-219.87-490.148-490.12-490.148zm0 1113.158c-343.55.0-623.04-279.483-623.04-623.01.0-343.527 279.49-623 623.04-623 343.53.0 623 279.473 623 623s-279.47 623.01-623 623.01zM1548.3 132.852c-270.27.0-490.15 219.882-490.15 490.148.0 270.277 219.88 490.16 490.15 490.16 270.26.0 490.13-219.883 490.13-490.16.0-270.266-219.87-490.148-490.13-490.148zm0 1113.158C1204.76 1246.01 925.262 966.527 925.262 623 925.262 279.473 1204.76.0 1548.3.0c343.53.0 623.01 279.473 623.01 623s-279.48 623.01-623.01 623.01"/></g></g></svg></a><a target=_blank href=https://www.flickr.com/photos/kevinmasson/ rel="noreferrer noopener" title=Flickr><svg fill="currentcolor" width="24" height="24" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 300 300" style="enable-background:new 0 0 300 300"><g id="XMLID_830_"><g id="XMLID_833_"><circle cx="67.57" cy="150" r="67.57"/></g><g id="XMLID_838_"><circle cx="232.43" cy="150" r="67.57"/></g></g></svg></a></div></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Migrate models when adding inheritance in Django</h1><div class=post-meta>17 Sep 2017
· 5 min read<span> ·<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
<a href=https://github.com/oktomus/website/blob/master/content/posts/2017/migrate-models-when-adding-inheritance-django.md rel=nofollow>1 contributor</a></span></div></header><div class=post-content><p>When you have one or more models that you are already using in your application and you want to change the parent class, the Django migration tool doesn't know what to do with the fields that will be transferred into the parent class values. By default, Django will erase existing fields and create new ones.</p><p>Here is a scheme a what you may want to do.</p><p><img src=/2017/django/migrate-models-diagram.png alt="Django class diagram"></p><p>Changing the parent class is useful when you want to share some attributes and operations throughout multiple models. For example on my website, I use it to share a Manager, Views and AdminModels throughout blog posts and work posts.</p><p>If you try to migrate from version 1 to version 2, Django will ask for a default value for the field title and it will erase what you already have.</p><p>To deal with it, you can write your own migration step. Be sure to <strong>make a backup</strong> before migrating to be sure to don't lose your data.</p><hr><p><strong>Edit</strong>:</p><p>As CKreuzberger mentioned on my <a href=https://www.reddit.com/r/django/comments/70mew2/article_migrate_models_when_adding_inheritance_in/dn4ay1s/>reddit post</a>, you can add <code>abstract = True</code> in the meta of the Post class which will prevent the creation of a database for Posts so you won't have to do anything when executing migration. See the <a href=https://docs.djangoproject.com/en/1.11/topics/db/models/#abstract-base-classes>documentation</a> for more details.</p><p>But if you want more than just shared fields, you shouldn't use the abstract meta.</p><hr><p>Before making any change on your child classes, you must have created and migrated your parent class. Also, be aware that shared fields have to be exactly the same. If you want to modify them (length, default value, &mldr;), do it after you have migrated your child classes.</p><h2 id=1-create-the-default-migration-step>1. Create the default migration step</h2><p>After having modified your child class (changing the parent and removing the common fields), you can start the process.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ python manage.py makemigrations
You are trying to add a non-nullable field <span style=color:#ed9d13>&#39;post_ptr&#39;</span> to blog without a default; we can<span style=color:#ed9d13>&#39;t do that (the database needs something to populate existing rows).
</span><span style=color:#ed9d13>Please select a fix:
</span><span style=color:#ed9d13>1) Provide a one-off default now (will be set on all existing rows with a null value for this column)
</span><span style=color:#ed9d13>    2) Quit, and let me add a default in models.py
</span><span style=color:#ed9d13>    Select an option: 1 # &lt;- Choose One
</span><span style=color:#ed9d13>    Please enter the default value now, as valid Python
</span><span style=color:#ed9d13>    The datetime and Django.utils.timezone modules are available, so you can do e.g. timezone.now
</span><span style=color:#ed9d13>    Type &#39;</span>exit<span style=color:#ed9d13>&#39; to exit this prompt
</span><span style=color:#ed9d13>    &gt;&gt;&gt; 0 # &lt;- Add a default value
</span><span style=color:#ed9d13>    Migrations for &#39;</span>blog<span style=color:#a61717;background-color:#e3d2d2>&#39;</span>:
    blog/migrations/0002_auto_20170916_1247.py
    - Remove field id from blog
    - Remove field title from blog
    - Add field post_ptr to blog
</code></pre></div><p>You can specify whatever you want for the default value since we will add our own script.</p><h2 id=2-modify-the-migration-operations>2. Modify the migration operations</h2><p>Open the migration file located in your application</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>vim blog/migrations/0002_auto_20170916_1247.py
</code></pre></div><p>We can now change the operations with our own.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#999;font-style:italic># New operations</span>

operations = [
    migrations.RenameModel(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>Blog</span><span style=color:#ed9d13>&#39;</span>, <span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>OldBlog</span><span style=color:#ed9d13>&#39;</span>),
    migrations.CreateModel(
        name=<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>NewBlog</span><span style=color:#ed9d13>&#39;</span>,
        fields=[
            (<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>post_ptr</span><span style=color:#ed9d13>&#39;</span>, models.OneToOneField(auto_created=True, on_delete=Django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to=<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>post.Post</span><span style=color:#ed9d13>&#39;</span>)),
            (<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog_only_field</span><span style=color:#ed9d13>&#39;</span>, models.TextField()), <span style=color:#999;font-style:italic># DON&#39;T FORGET NON COMMON FIELDS</span>
        ],
        bases=(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>post.post</span><span style=color:#ed9d13>&#39;</span>,),
    ),
    migrations.RunPython(switch_to_post, switch_to_nopost),
    migrations.DeleteModel(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>OldBlog</span><span style=color:#ed9d13>&#39;</span>),
    migrations.RenameModel(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>NewBlog</span><span style=color:#ed9d13>&#39;</span>, <span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>Blog</span><span style=color:#ed9d13>&#39;</span>)
]

<span style=color:#ed9d13></span><span style=color:#ed9d13>&#34;&#34;&#34;</span><span style=color:#ed9d13> Original operations</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>migrations.RemoveField(</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    model_name=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    name=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>id</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>),</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>migrations.RemoveField(</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    model_name=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    name=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>title</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>),</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>migrations.AddField(</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    model_name=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    name=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>post_ptr</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    field=models.OneToOneField(auto_created=True, default=0, on_delete=Django.db.models.deletion.CASCADE, parent_link=True, primary_key=True, serialize=False, to=</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>post.Post</span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>),</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>    preserve_default=False,</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>),</span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>
</span><span style=color:#ed9d13></span><span style=color:#ed9d13>&#34;&#34;&#34;</span>
</code></pre></div><p>As you can see, the original operations were supposed to remove the fields, which will erase all the entries&rsquo; fields you have in your database.</p><p><strong>Very important</strong>, don't forget in the CreateModel operation to add fields that are not shared with the parent class. To know what to add, check out the previous migration files of your model.</p><p>Here is what the new operations do:</p><ul><li>We first rename our model so we can create a new one based on the existing one</li><li>We then create a new model with a pointer to the parent class and all non shared fields
All inherited fields must be only in the parent class (e.g. you can't have a field title in the Blog model and in the Post model), otherwise the migration won't work.</li><li>Then we call <em>switch_to_post</em> (we will define it after) to migrate all our database entries to the new model. We also specify a reverse function that will be called if we want to rollback.</li><li>Since the entires were transferred, we can now delete the old model.</li><li>And finally rename the new model.</li></ul><p>Now we need to define the two functions required to transfer the entries of our model to the new model.</p><h2 id=3-create-transfer-functions>3. Create transfer functions</h2><p>These functions have to be defined outside the <em>Migration</em> class.</p><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>switch_to_post</span>(apps, schema_editor):
    <span style=color:#ed9d13></span><span style=color:#ed9d13>&#34;&#34;&#34;</span><span style=color:#ed9d13> From non inehirtance to post inheritance </span><span style=color:#ed9d13>&#34;&#34;&#34;</span>
    OldBlog = apps.get_model(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span>, <span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>OldBlog</span><span style=color:#ed9d13>&#39;</span>)
    NewBlog = apps.get_model(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span>, <span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>NewBlog</span><span style=color:#ed9d13>&#39;</span>)
    <span style=color:#6ab825;font-weight:700>for</span> blog <span style=color:#6ab825;font-weight:700>in</span> OldBlog.objects.all():
        new_post_blog = NewBlog.objects.create(title=blog.title)
        blog.delete()

<span style=color:#6ab825;font-weight:700>def</span> <span style=color:#447fcf>switch_to_nopost</span>(apps, schema_editor):
    <span style=color:#ed9d13></span><span style=color:#ed9d13>&#34;&#34;&#34;</span><span style=color:#ed9d13> Rollback </span><span style=color:#ed9d13>&#34;&#34;&#34;</span>
    OldBlog = apps.get_model(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span>, <span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>OldBlog</span><span style=color:#ed9d13>&#39;</span>)
    NewBlog = apps.get_model(<span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>blog</span><span style=color:#ed9d13>&#39;</span>, <span style=color:#ed9d13></span><span style=color:#ed9d13>&#39;</span><span style=color:#ed9d13>NewBlog</span><span style=color:#ed9d13>&#39;</span>)

    <span style=color:#6ab825;font-weight:700>for</span> blog <span style=color:#6ab825;font-weight:700>in</span> NewBlog.objects.all():
        new_blog = OldBlog.objects.create(title=blog.title)
        blog.delete()
</code></pre></div><p><em>switch_to_post</em> create a new model for each old model, and <em>switch_to_nopost</em> revert new models to old ones.</p><p>We have to do it this way because all shared fields&rsquo; data have to be transferred to the parent model in the database. If we don't provide our own operations, Django will just erase old fields and create new ones with default values.</p><h2 id=4-migrate>4. Migrate!</h2><div class=highlight><pre style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ python manage.py migrate
Operations to perform:
    Apply all migrations: admin, auth, blog, contenttypes, post, sessions
Running migrations:
    Applying blog.0002_auto_20170916_1247... OK
</code></pre></div><p>And now, your application is still working with all the entires you had before.</p><p>You can now do the same for all the models you want to change parent class.</p></div><div class=post-footer><section id=isso-thread></section><script data-isso=https://isso.oktomus.com/ src=https://isso.oktomus.com/js/embed.min.js></script></div></article></main><script type=text/javascript>var _paq=window._paq||[];_paq.push(['trackPageView']);_paq.push(['enableLinkTracking']);(function(){var u="//matomo.oktomus.com/";_paq.push(['setTrackerUrl',u+'matomo.php']);_paq.push(['setSiteId','1']);var d=document,g=d.createElement('script'),s=d.getElementsByTagName('script')[0];g.type='text/javascript';g.async=true;g.defer=true;g.src=u+'matomo.js';s.parentNode.insertBefore(g,s);})();</script></body></html>